<!doctype html>
<html lang="en" class="h-100" data-bs-theme="dark">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Home Assistant From Scratch - Setting Up Plex</title>
		<meta name="description" content="Coding and more">
		
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
		<meta name="generator" content="Eleventy v3.1.1">
		
		<style>@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap");

body {
	font-family: "Open Sans", sans-serif;
	font-optical-sizing: auto;
}

.navbar .navbar-brand.active,
.navbar-nav .nav-item .nav-link.active {
	border-bottom: 1px solid #e0e9f2;
}

div.main-content {
	margin-top: 4rem;
	font-size: 1.1rem;
}

.blog-list a {
	text-decoration: none;
}

.post-meta .post-date time {
	color: #f3fe90;
}

div.main-content > h1 {
	color: #c3e6ff;
	margin-bottom: 1rem;
}

div.main-content > h2 {
	color: #ffd97f;
	margin-bottom: 1rem;
}

div.main-content h2.quick-access {
	color: #7cbbe6;
}

div.main-content > h3 {
	color: #f0ff7f;
	margin-bottom: 1rem;
}

div.main-content pre {
	font-size: 1.1rem;
	background-color: #31363b;
	border: 1px solid #3f4851;
	padding: 0.5rem;
	margin-bottom: 1rem;
}

div.main-content picture img:not(.no-borders) {
	border: 1px solid #454d55;
	max-width: 100%;
	height: auto;
	border-radius: 0.5rem;
}

div.main-content picture {
	display: block;
}
div.main-content picture:has(img.text-center) {
	text-align: center;
}

div.main-content picture img {
	margin-bottom: 1rem;
	box-shadow: 5px 5px 10px 0px #2b3137;
}

div.main-content div.prev-next {
	background-color: #293037;
	border-radius: 0.5rem;
	padding: 0.5rem;
}

div.main-content table {
	border: 1px solid #363c43;
	font-size: 1rem;
}

div.main-content .list-group-item:hover {
	background-color: #2b3137;
}

div.main-content .accordion {
	margin-bottom: 1rem;
}

div.main-content .accordion .accordion-item .accordion-body {
	background-color: #2a2f35;
}
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}</style>
		
		<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1689302880129363" crossorigin="anonymous"></script>
	</head>
	<!-- Google tag (gtag.js) -->
	<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HRDC8SXRVG"></script>
	
	<body class="d-flex flex-column h-100">
		<header>
			<nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background-color:rgb(53, 76, 92);">
				<div class="container-fluid">
					<a class="navbar-brand " href="/">RichardN</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarCollapse">
						<ul class="navbar-nav me-auto mb-2 mb-md-0">
							<li class="nav-item">
								<a class="nav-link " href="/projects/">Projects</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/tags/">Tags</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/blog/">Archive</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>
		<main class="flex-shrink-0">
			<div class="container main-content">
				


<h1 id="home-assistant-from-scratch-setting-up-plex">Home Assistant From Scratch - Setting Up Plex</h1>

<div class="p-1 mb-1 d-flex post-meta">
		<span>
			<i class="bi bi-bookmarks-fill"></i>
				<a href="/tags/home-assistant/" class="post-tag">home assistant</a>
		</span>
	<div class="p-2 flex-grow-1">&nbsp;</div>
	<span class="post-date">
		<i class="bi bi-calendar-plus-fill"></i>
		<time datetime="2018-06-28">28 June 2018</time>
	</span>
</div>

<blockquote>
<p>This is one <strong><a href="/blog/2018/2018-06-27/post/">post in a series</a></strong> of getting up and running with Home Assistant from scratch.</p>
</blockquote>
<p>Today I would like to get <a href="https://www.plex.tv/">Plex</a> configured and running in <a href="https://www.home-assistant.io/">Home Assistant</a>.</p>
<p>Thanks to all the hard work put in by the developers of Home Assistant this is a pretty trivial task on their side, with a little bit of leg work on ours to get a Plex token.</p>
<p>Before you begin you will need to make sure that you meet the following criteria.</p>
<ul>
<li>You have a working Home Assistant setup</li>
<li>You have a <a href="https://www.plex.tv/">Plex Media Server</a> (PMS) installed and running somewhere in your home.</li>
<li>You have an <a href="https://www.plex.tv/sign-up/">account with Plex</a> - we use this account to obtain a long-living token for Home Assistant to use</li>
<li><a href="https://www.postman.com/">Postman</a> - used to obtain the Plex token</li>
</ul>
<h2 id="obtaining-your-plex-token">Obtaining your Plex Token</h2>
<p>The first thing we will need to do is get a long-lived Plex token for Home Assistant to use when making calls to your Plex Media Server. If you look at the <a href="https://www.home-assistant.io/integrations/plex/">Plex Component</a> page you will see that they refer to <a href="https://support.plex.tv/articles/204059436-finding-an-authentication-token-x-plex-token/">this method</a> to get a token, however this is a temporary token and will expire after some time - so this is of no use to us.</p>
<p>Let’s do that now, first we will need to open Postman and configure it as shown below:</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/SAZQKxohXO-732.avif 732w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/SAZQKxohXO-732.webp 732w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/SAZQKxohXO-732.png" alt="" width="732" height="264"></picture>
<pre><code>Request Type: POST
URL: https://plex.tv/users/sign_in.json
Headers:
    X-Plex-Client-Identifier = hass
    X-Plex-Product:= hass
    X-Plex-Version = 1.0.0
Body:
    Content Type: form-data
    user[login] : &lt;your_login_email&gt;
    user[password] : &lt;your password&gt;
</code></pre>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/TDj5NNOKCg-612.avif 612w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/TDj5NNOKCg-612.webp 612w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/TDj5NNOKCg-612.png" alt="" width="612" height="245"></picture>
<p>Click send to make the request. If you entered in everything correctly you should be greeted with a successful login:</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/k3KpxBmMHu-768.avif 768w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/k3KpxBmMHu-768.webp 768w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/k3KpxBmMHu-768.png" alt="" width="768" height="398"></picture>
<p>In the response body you will see a property called <code>“authentication_token”</code> - this is what we want. Take note of the token as we will be using it in the next step.</p>
<h2 id="adding-plex-to-home-assistant">Adding Plex to Home Assistant</h2>
<p>As mentioned above the Home Assistant side of things is way simpler, provided that your HASS server is on the same network as your Plex Media Server and discovery (GDM) is enabled in Plex (as far as I know this is the default setting).</p>
<p>When you navigate over to HASS you should see a card similar to the one below telling you that Home Assistant has found an instance of Plex running on its network.</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/r8vPqaODkG-502.avif 502w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/r8vPqaODkG-502.webp 502w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/r8vPqaODkG-502.png" alt="" width="502" height="140"></picture>
<p>Click the configure button, and enter in the token collected above into the appropriate field as shown below:</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/sNeTIcepOR-381.avif 381w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/sNeTIcepOR-381.webp 381w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/sNeTIcepOR-381.png" alt="" width="381" height="357"></picture>
<p>Click confirm, and you are done. After a few seconds you should see a new card per plex enabled device currently on your network:</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/oxQR3ffYfJ-511.avif 511w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/oxQR3ffYfJ-511.webp 511w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/oxQR3ffYfJ-511.png" alt="" width="511" height="348"></picture>
<p>Any device currently watching something on Plex should pop up as a card like so:</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/kuIc7atkTO-498.avif 498w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/kuIc7atkTO-498.webp 498w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/kuIc7atkTO-498.png" alt="" width="498" height="357"></picture>
<p>Now you have the option to play, pause, stop, skip and change the volume on the streaming device:</p>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/rvA-83zSIr-382.avif 382w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/rvA-83zSIr-382.webp 382w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/rvA-83zSIr-382.png" alt="" width="382" height="315"></picture>
<h2 id="don-t-commit-personal-files">Don’t commit personal files</h2>
<p>Once Plex has been added to Home Assistant, and providing that you are following along with this series, a couple of new files should have been added to your Home Assistant directory, namely:</p>
<ul>
<li><code>plex.conf</code> - configuration file that contains your Plex access token among other things</li>
<li><code>entity_registry.yaml</code> - device registry kept by Home Assistant to help identify devices and customise their display names (you can find out more about the entity registry here)</li>
</ul>
<picture><source type="image/avif" srcset="/blog/2018/2018-06-28/post1/AfqrgEO2Mj-390.avif 390w"><source type="image/webp" srcset="/blog/2018/2018-06-28/post1/AfqrgEO2Mj-390.webp 390w"><img loading="lazy" decoding="async" src="/blog/2018/2018-06-28/post1/AfqrgEO2Mj-390.png" alt="" width="390" height="147"></picture>
<p>These files are required for Home Assistant to do its thing, but should not be made public if you are using GitHub to manage your configuration like I do. We will need to add these two files to the .gitignore file to prevent accidental publication of your Plex token and home entities information, this is as simple as adding the following lines to your .gitignore file:</p>
<pre><code>Entity_registry\.yaml
plex\.conf
</code></pre>
<h2 id="do-a-manual-backup">Do a manual backup</h2>
<p>Until we cover an automated backup flow for your personal files in Home Assistant, now would be a good time to do a manual backup of the following files to a safe location - just in case.</p>
<ul>
<li>entity_registry.yaml</li>
<li>secrets.yaml</li>
<li>plex.conf</li>
</ul>
<p>This will allow you to quickly recover from accidental file deletion \ corrupt SD Card easily when paired with your public GitHub repository.</p>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>We finally have something to look at on our Home Assistant deployment (besides the welcome and discovery cards), but this is just the beginning.</p>
<p>In the next few posts we will be adding more and more components to Home Assistant in preparation for a post covering Groups and Views, which is one of the most useful features in Home Assistant.</p>
<p>There is still a lot of theory to go over, but as this series progresses I am going to be moving to a more high-level approach to it all, only diving in deep for important \ crucial concepts, otherwise linking to the official Home Assistant documentation.</p>
<p>As always I welcome any feedback, comments and questions.</p>

<div class="d-flex mb-3 prev-next">
	<i class="bi bi-arrow-left-short"></i>
	<span class="text-start">Previous<br><a href="/blog/2018/2018-06-27/post/">Home Assistant From Scratch - Installation</a></span>
	
	<div class="p-2 flex-grow-1">&nbsp;</div>
	<span class="text-end">Next<br><a href="/blog/2018/2018-06-28/post2/">Home Assistant From Scratch - Secrets and Security</a></span>
	<i class="bi bi-arrow-right-short"></i>
	
</div>




			</div>
		</main>
		<footer class="footer mt-auto py-3 bg-body-tertiary">
			<div class="container text-end">
				<span class="text-body-secondary">
					View me on <a href="https://github.com/rniemand" target="_blank">GitHub</a>.
				</span>
			</div>
		</footer>
		<!-- This page `/blog/2018/2018-06-28/post1/` was built on 2025-07-22T20:26:45.343Z -->
		<script type="module" src="/dist/FtW8cD1Sur.js"></script>
		<script src="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
		<script id="dsq-count-scr" src="//richardn-ca.disqus.com/count.js" async=""></script>
	</body>
</html>
