<!doctype html>
<html lang="en" class="h-100" data-bs-theme="dark">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>HASS On Unraid: Times of Day Automations</title>
		<meta name="description" content="Coding and more">
		
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
		<meta name="generator" content="Eleventy v3.1.1">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
div.main-content {
	margin-top: 4rem;
}
.blog-list a {
	text-decoration: none;
}
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}</style>
		
	</head>
	<!-- Google tag (gtag.js) -->
	<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HRDC8SXRVG"></script>
	
	<body class="d-flex flex-column h-100">
		<header>
			<nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background-color:rgb(53, 76, 92);">
				<div class="container-fluid">
					<a class="navbar-brand" href="/">RichardN</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarCollapse">
						<ul class="navbar-nav me-auto mb-2 mb-md-0">
							<li class="nav-item">
								<a class="nav-link " href="/">Home</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/blog/">Archive</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/about/">About</a>
							</li>
						</ul>
					</div>
				</div>
        	</nav>
		</header>
		<main class="flex-shrink-0">
			<div class="container main-content">
				


<h1 id="hass-on-unraid-times-of-day-automations">HASS On Unraid: Times of Day Automations</h1>

<ul class="post-metadata">
	<li><time datetime="2022-06-10">10 June 2022</time></li>
</ul>

<p>In this post I will explore the concepts of Helpers in Home Assistant and the potential that they can unlock with your automations.</p>
<blockquote>
<p>It is worthwhile adopting a naming convention for your automation to make discovery \ searching easier in the future, I tend to follow an &quot;<code>&lt;object&gt;</code> - <code>&lt;action&gt;</code> - <code>&lt;condition&gt;</code>&quot; pattern.
{: .prompt-tip }</p>
</blockquote>
<p>Let’s start.</p>
<h1 id="required-integrations">Required Integrations</h1>
<p>If you are planning on following along at home you will need to add the following integrations to Home Assistant.</p>
<h2 id="times-of-the-day">Times of the Day</h2>
<p>One of the more useful integrations I use is <a href="https://www.home-assistant.io/integrations/tod/">Times of the Day</a>, which as the name suggests allows you to create a binary sensor that gets its values by checking if the current time is within defined time ranges.</p>
<p>What makes this integration powerful is the fact that it uses your home's location in combination with the <a href="https://www.home-assistant.io/integrations/sun/#implementation-details">sun integration</a> to provide dynamic values for <code>sunrise</code> and <code>sunset</code> that can be used in your automations.</p>
<p>In my automation tasks I tend to use the following times of day a lot:</p>
<h3 id="before-sunrise">Before Sunrise</h3>
<p>Defined in <code>custom/binary_sensors/binary.is-daytime.yaml</code></p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> tod
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"Is Daytime"</span>
  <span class="token key atrule">after</span><span class="token punctuation">:</span> sunrise
  <span class="token key atrule">before</span><span class="token punctuation">:</span> sunset</code></pre>
<p>Simple binary sensor that is enabled between sunrise and sunset, there are no hard-coded times here to adjust as the length of the days changes during the year.</p>
<h3 id="night">Night</h3>
<p>Defined in <code>custom/binary_sensors/binary.is-evening.yaml</code></p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> tod
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"Is Evening"</span>
  <span class="token key atrule">after</span><span class="token punctuation">:</span> sunset
  <span class="token key atrule">after_offset</span><span class="token punctuation">:</span> <span class="token string">"-00:10"</span>
  <span class="token key atrule">before</span><span class="token punctuation">:</span> sunrise</code></pre>
<p>Similar to <strong>Before Sunrise</strong>, however I subtract 10 min from “sunset” to ensure that my lights are on just a little bit before.</p>
<blockquote>
<p>If you are using any of the before modifiers make sure that you take them into consideration for your automations.
{: .prompt-info }</p>
</blockquote>
<h2 id="workday">Workday</h2>
<p>The <a href="https://www.home-assistant.io/integrations/workday/">workday</a> binary sensor indicates whether the current day is a workday or not. It allows specifying which days of the week will count as workdays and also uses the Python module <a href="https://pypi.org/project/holidays/">holidays</a> to incorporate information about region-specific public holidays.</p>
<p>Using the workday integration I am able to create binary sensors for <strong>school days</strong> and <strong>work days</strong> allowing me to add context aware automations for my kids, i.e. allowing them to sleep in on the weekends.</p>
<h3 id="is-school-night">Is School Night</h3>
<p>Defined in <code>custom/binary_sensors/is-school-night.yaml</code>”.`</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> workday
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"Is School Night"</span>
  <span class="token key atrule">country</span><span class="token punctuation">:</span> CA
  <span class="token key atrule">province</span><span class="token punctuation">:</span> AB
  <span class="token key atrule">workdays</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>sun<span class="token punctuation">,</span> mon<span class="token punctuation">,</span> tue<span class="token punctuation">,</span> wed<span class="token punctuation">,</span> thu<span class="token punctuation">]</span>
  <span class="token key atrule">excludes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>fri<span class="token punctuation">,</span> sat<span class="token punctuation">]</span></code></pre>
<p>I ensure that my country and province is set along with the appropriate days to use for tracking school days. This works for 90% of my use-cases but things like the schools PD Days etc are not catered for here. Currently I am just manually toggling the relevant automations when required.</p>
<h3 id="is-workday">Is Workday</h3>
<p>Defined in <code>custom/binary_sensors/is-workday.yaml</code></p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> workday
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"Is Workday"</span>
  <span class="token key atrule">country</span><span class="token punctuation">:</span> CA
  <span class="token key atrule">province</span><span class="token punctuation">:</span> AB
  <span class="token key atrule">workdays</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>mon<span class="token punctuation">,</span> tue<span class="token punctuation">,</span> wed<span class="token punctuation">,</span> thu<span class="token punctuation">,</span> fri<span class="token punctuation">]</span></code></pre>
<p>Pretty much a copy of the “Is School Day” sensor, I decided to separate them in the hopes that in the future I can adjust the school nights one to cater for various PD Days, snow days etc. this is to ensure that I don’t need to back track and redo any automations that share this logic in the future.</p>
<h2 id="including-the-sensors">Including the sensors</h2>
<p>To load these sensors into Home Assistant I include them in my main “configuration.yaml” file like so:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">binary_sensor</span><span class="token punctuation">:</span> <span class="token tag">!include_dir_merge_list</span> custom/binary_sensors</code></pre>
<picture><source type="image/avif" srcset="/blog/2022/2022-06-10/post/zkSpomrjrG-506.avif 506w"><source type="image/webp" srcset="/blog/2022/2022-06-10/post/zkSpomrjrG-506.webp 506w"><img loading="lazy" decoding="async" src="/blog/2022/2022-06-10/post/zkSpomrjrG-506.png" alt="" width="506" height="132"></picture>
<p>Thats it - these sensors are good to go with any of your automations.</p>
<h1 id="helpers">Helpers</h1>
<p>Helpers are a relatively new concept to Home Assistant that has been getting a lot of love over the last 4-6 months, and allow for dynamic values for use with automations. These values can either be defined via the Home Assistant UI, or through various wizards when setting up automations.</p>
<p>By far the most useful helpers are the <strong>Date and/or Time</strong>, <strong>Dropdown</strong>, <strong>Group</strong> and <strong>Number</strong> helpers, however there are so many of them available, with the list growing with each release it seems.</p>
<h1 id="automations">Automations</h1>
<p>Below are some sample automations that make use of the <strong>Times of Day</strong> and <strong>Workday</strong> sensors along with some custom helpers.</p>
<h2 id="office-routine-workday-start">Office - Routine - Workday Start</h2>
<p>Simple automation that uses a Date Time helper in combination with the Workday sensor to turn on the lights \ plugs in my office when my work day starts.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Office <span class="token punctuation">-</span> Routine <span class="token punctuation">-</span> Workday Start
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> time
    <span class="token key atrule">at</span><span class="token punctuation">:</span> input_datetime.workday_start_richard
<span class="token key atrule">condition</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> and
    <span class="token key atrule">conditions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_workday
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> input_boolean.enable_workday_automations
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> light.turn_on
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> light.office_lamp
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> switch.turn_on
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> switch.plug_2
        <span class="token punctuation">-</span> switch.plug_3
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> light.turn_on
    <span class="token key atrule">data</span><span class="token punctuation">:</span>
      <span class="token key atrule">brightness_pct</span><span class="token punctuation">:</span> <span class="token number">81</span>
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> light.nas
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<picture><source type="image/avif" srcset="/blog/2022/2022-06-10/post/bkPXV_ytoY-506.avif 506w"><source type="image/webp" srcset="/blog/2022/2022-06-10/post/bkPXV_ytoY-506.webp 506w"><img loading="lazy" decoding="async" src="/blog/2022/2022-06-10/post/bkPXV_ytoY-506.png" alt="" width="506" height="197"></picture>
<h2 id="sam-school-day-start-06-45">Sam - School Day - Start (06:45)</h2>
<p>On school days I use this automation to ensure that my daughter is up for 7:00 am, this makes use of the <strong>Is School Day</strong> sensor and basically just turns on her lights in the morning:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Sam <span class="token punctuation">-</span> School Day <span class="token punctuation">-</span> Start (06<span class="token punctuation">:</span>45)
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> time
    <span class="token key atrule">at</span><span class="token punctuation">:</span> <span class="token string">'06:45:00'</span>
<span class="token key atrule">condition</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> and
    <span class="token key atrule">conditions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_workday
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> input_boolean.school_automation
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> light.turn_on
    <span class="token key atrule">data</span><span class="token punctuation">:</span>
      <span class="token key atrule">brightness_pct</span><span class="token punctuation">:</span> <span class="token number">96</span>
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> light.sam_overhead
        <span class="token punctuation">-</span> light.sam_bedside
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> light.turn_off
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> light.samsign
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<p>I make use of a boolean toggle to quickly enable \ disable the automation when needed.</p>
<picture><source type="image/avif" srcset="/blog/2022/2022-06-10/post/gH8sCtMoDq-475.avif 475w"><source type="image/webp" srcset="/blog/2022/2022-06-10/post/gH8sCtMoDq-475.webp 475w"><img loading="lazy" decoding="async" src="/blog/2022/2022-06-10/post/gH8sCtMoDq-475.png" alt="" width="475" height="59"></picture>
<p>In addition to this I have another automation that re-enabled this toggle at the start of the next day (~10:00 am) in case I forget to re-enable it manually.</p>
<h2 id="school-related-automations">School Related Automations</h2>
<h3 id="set-scene-sam-bedtime-weekends">Set Scene - Sam Bedtime - Weekends</h3>
<p>This automation makes use of the Workday sensor along with dynamic times to activate a specified scene on the weekends for my daughter.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Set Scene <span class="token punctuation">-</span> Sam Bedtime <span class="token punctuation">-</span> Weekends
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> time
    <span class="token key atrule">at</span><span class="token punctuation">:</span> input_datetime.sam_bedtime_weekend
<span class="token key atrule">condition</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
    <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_school_night
    <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'off'</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">scene</span><span class="token punctuation">:</span> scene.sam_bedtime
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h3 id="set-scene-sam-bedtime-school-automation-on">Set Scene - Sam Bedtime - School Automation (On)</h3>
<p>Similar to the above this automation will turn off Sam's lights at the appropriate time in the evenings on a school night.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Set Scene <span class="token punctuation">-</span> Sam Bedtime <span class="token punctuation">-</span> School Automation (On)
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> time
    <span class="token key atrule">at</span><span class="token punctuation">:</span> input_datetime.sam_bedtime_school_night
<span class="token key atrule">condition</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> and
    <span class="token key atrule">conditions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> input_boolean.school_automation
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_school_night
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">scene</span><span class="token punctuation">:</span> scene.sam_bedtime
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h3 id="set-scene-sam-bedtime-school-automation-off">Set Scene - Sam Bedtime - School Automation (Off)</h3>
<p>Helper automation to cater for school specific off days when Sam can stay up a bit later in the evenings.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Set Scene <span class="token punctuation">-</span> Sam Bedtime <span class="token punctuation">-</span> School Automation (Off)
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> time
    <span class="token key atrule">at</span><span class="token punctuation">:</span> input_datetime.sam_bedtime_weekend
<span class="token key atrule">condition</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> and
    <span class="token key atrule">conditions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> input_boolean.school_automation
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'off'</span>
      <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span> state
        <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_school_night
        <span class="token key atrule">state</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">scene</span><span class="token punctuation">:</span> scene.sam_bedtime
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h3 id="pulling-it-all-together">Pulling it all together</h3>
<p>To allow for easier control of Sam’s automations i created the following view that allows me to quickly toggle \ tweak any values that I may need to:</p>
<picture><source type="image/avif" srcset="/blog/2022/2022-06-10/post/15o3k7M0nn-497.avif 497w"><source type="image/webp" srcset="/blog/2022/2022-06-10/post/15o3k7M0nn-497.webp 497w"><img loading="lazy" decoding="async" src="/blog/2022/2022-06-10/post/15o3k7M0nn-497.png" alt="" width="497" height="259"></picture>
<h2 id="light-automations">Light Automations</h2>
<p>Below are a few automation examples I use with some of the lighting around my house.</p>
<h3 id="external-lights-turn-off-mornings">External - Lights - Turn Off (Mornings)</h3>
<p>Dynamic automation to turn off lights based on the sunrise.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> External <span class="token punctuation">-</span> Lights <span class="token punctuation">-</span> Turn Off (Mornings)
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> state
    <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_daytime
    <span class="token key atrule">from</span><span class="token punctuation">:</span> <span class="token string">'off'</span>
    <span class="token key atrule">to</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
    <span class="token key atrule">for</span><span class="token punctuation">:</span>
      <span class="token key atrule">hours</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">minutes</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">seconds</span><span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> switch.turn_off
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> switch.front_lights
        <span class="token punctuation">-</span> switch.holiday_lights
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> light.turn_off
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> light.deck_light
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h3 id="external-lights-turn-on-evenings">External - Lights - Turn On (Evenings)</h3>
<p>Dynamic automation used to turn on lights based on the sunset.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> External <span class="token punctuation">-</span> Lights <span class="token punctuation">-</span> Turn On (Evenings)
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> state
    <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_evening
    <span class="token key atrule">from</span><span class="token punctuation">:</span> <span class="token string">'off'</span>
    <span class="token key atrule">to</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
<span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> switch.turn_on
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> switch.front_lights
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h3 id="dining-area-lights-turn-off-display-cabinet-mornings">Dining Area - Lights - Turn Off - Display Cabinet (Mornings)</h3>
<p>Helper automation to ensure that specific lights are turned off regardless of sunrise \ sunset.</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Dining Area <span class="token punctuation">-</span> Lights <span class="token punctuation">-</span> Turn Off <span class="token punctuation">-</span> Display Cabinet (Mornings)
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> state
    <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_daytime
    <span class="token key atrule">from</span><span class="token punctuation">:</span> <span class="token string">'off'</span>
    <span class="token key atrule">to</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
    <span class="token key atrule">for</span><span class="token punctuation">:</span>
      <span class="token key atrule">hours</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">minutes</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">seconds</span><span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">service</span><span class="token punctuation">:</span> light.turn_off
    <span class="token key atrule">target</span><span class="token punctuation">:</span>
      <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> light.display_cabinet
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h2 id="changing-lounge-clock-scene">Changing Lounge Clock Scene</h2>
<p>Another use for the Times of Day integration is to adjust the style of my <strong><a href="https://www.richardn.ca/posts/LoungeClockV1/">lounge clock</a></strong>, making it more visible during the day, and dimming it in the evenings. Below are a couple of the automations I use for that:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Lounge Clock <span class="token punctuation">-</span> Set Scene <span class="token punctuation">-</span> Early Evening
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> state
    <span class="token key atrule">entity_id</span><span class="token punctuation">:</span> binary_sensor.is_evening
    <span class="token key atrule">from</span><span class="token punctuation">:</span> <span class="token string">'off'</span>
    <span class="token key atrule">to</span><span class="token punctuation">:</span> <span class="token string">'on'</span>
<span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">delay</span><span class="token punctuation">:</span>
      <span class="token key atrule">hours</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">minutes</span><span class="token punctuation">:</span> <span class="token number">10</span>
      <span class="token key atrule">seconds</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">milliseconds</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">-</span> <span class="token key atrule">scene</span><span class="token punctuation">:</span> scene.lounge_clock_early_evening
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">alias</span><span class="token punctuation">:</span> Lounge Clock <span class="token punctuation">-</span> Set Scene <span class="token punctuation">-</span> Early Morning
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> time
    <span class="token key atrule">at</span><span class="token punctuation">:</span> <span class="token string">'07:00:00'</span>
<span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">action</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">scene</span><span class="token punctuation">:</span> scene.lounge_clock_early_morning
<span class="token key atrule">mode</span><span class="token punctuation">:</span> single</code></pre>
<h1 id="in-closing">In Closing</h1>
<p>Undoubtedly you can see that the possibilities opened up by adding just these 2 sensors to Home Assistant are numerous, with the addition of being location aware and adjusting to the sunrise and sunset times for your area saves you from having to constantly update times to match dawn \ dusk is worth the effort.</p>
<p>I hope that you found this post useful, and would love to see the automations that you can come up with.</p>
<p>Happy hacking!</p>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/2022/2022-06-07/post2/">Lounge Clock (v 1.0)</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/2022/2022-06-15/post/">Ceiling Fan Remote Hacking</a></li>
</ul>

			</div>
		</main>
		<footer class="footer mt-auto py-3 bg-body-tertiary">
			<div class="container text-end">
				<span class="text-body-secondary">
					<a href="https://github.com/rniemand" target="_blank">GitHub</a>
				</span>
			</div>
		</footer>
		<!-- This page `/blog/2022/2022-06-10/post/` was built on 2025-07-03T21:48:26.991Z -->
		<script type="module" src="/dist/WlufSHogYa.js"></script>
		<script src="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
