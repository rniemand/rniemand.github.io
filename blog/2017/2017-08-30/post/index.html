<!doctype html>
<html lang="en" class="h-100" data-bs-theme="dark">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>OctoPrint MQTT Events (with samples)</title>
		<meta name="description" content="Coding and more">
		
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
		<meta name="generator" content="Eleventy v3.1.1">
		
		
		<style>@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap");

body {
	font-family: "Open Sans", sans-serif;
	font-optical-sizing: auto;
}

div.main-content {
	margin-top: 4rem;
	font-size: 1.1rem;
}

.blog-list a {
	text-decoration: none;
}

.post-meta .post-date time {
	color: #f3fe90;
}

div.main-content > h1 {
	color: #c3e6ff;
	margin-bottom: 1rem;
}

div.main-content > h2 {
	color: #ffd97f;
	margin-bottom: 1rem;
}

div.main-content > h3 {
	color: #f0ff7f;
	margin-bottom: 1rem;
}

div.main-content pre {
	font-size: 1.1rem;
	background-color: #31363b;
	border: 1px solid #3f4851;
	padding: 0.5rem;
	margin-bottom: 1rem;
}

div.main-content picture img:not(.no-borders) {
	border: 1px solid #454d55;
	max-width: 100%;
	height: auto;
	border-radius: 0.5rem;
}

div.main-content picture {
	display: block;
}
div.main-content picture:has(img.text-center) {
	text-align: center;
}

div.main-content picture img {
	margin-bottom: 1rem;
	box-shadow: 5px 5px 10px 0px #2b3137;
}

div.main-content div.prev-next {
	background-color: #293037;
	border-radius: 0.5rem;
	padding: 0.5rem;
}

div.main-content table {
	border: 1px solid #363c43;
	font-size: 1rem;
}

div.main-content .list-group-item:hover {
	background-color: #2b3137;
}

div.main-content .accordion {
	margin-bottom: 1rem;
}

div.main-content .accordion .accordion-item .accordion-body {
	background-color: #2a2f35;
}
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}</style>
		
		<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1689302880129363" crossorigin="anonymous"></script>
	</head>
	<!-- Google tag (gtag.js) -->
	<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HRDC8SXRVG"></script>
	
	<body class="d-flex flex-column h-100">
		<header>
			<nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background-color:rgb(53, 76, 92);">
				<div class="container-fluid">
					<a class="navbar-brand" href="/">RichardN</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarCollapse">
						<ul class="navbar-nav me-auto mb-2 mb-md-0">
							<li class="nav-item">
								<a class="nav-link " href="/">Home</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/blog/">Archive</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/projects/">Projects</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/tags/">Tags</a>
							</li>
						</ul>
					</div>
				</div>
        	</nav>
		</header>
		<main class="flex-shrink-0">
			<div class="container main-content">
				


<h1 id="octoprint-mqtt-events-with-samples">OctoPrint MQTT Events (with samples)</h1>

<div class="p-1 mb-1 d-flex post-meta">
		<span>
			<i class="bi bi-bookmarks-fill"></i>
				<a href="/tags/3d-printing/" class="post-tag">3d printing</a>
		</span>
	<div class="p-2 flex-grow-1">&nbsp;</div>
	<span class="post-date">
		<i class="bi bi-calendar-plus-fill"></i>
		<time datetime="2017-08-30">30 August 2017</time>
	</span>
</div>

<p>Below you will find a list of all the MQTT events published by the <a href="https://plugins.octoprint.org/plugins/mqtt/">MQTT OctoPrint plugin</a>. I made use of my <code>MQTT-Dumper</code> application I created in <a href="/blog/2017/2017-08-29/post/">my previous post</a> to do this, and have taken the time to format some of the responses.</p>
<p>For a complete list of all available plugins for OctoPrint please check out their <a href="https://plugins.octoprint.org/by_date/">official plugin list</a>.</p>
<h2 id="printing-events">Printing Events</h2>
<p>Print job started: <code>octoprint/event/PrintStarted</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"origin"</span><span class="token operator">:</span> <span class="token string">"local"</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"PrintStarted"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_-_35_gap.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"file"</span><span class="token operator">:</span> <span class="token string">"/.../NodeMCU_Case_-_35_gap.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_-_35_gap.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"filename"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_-_35_gap.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">2858607</span>
<span class="token punctuation">}</span></code></pre>
<p>Print job status: <code>octoprint/progress/printing</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"progress"</span><span class="token operator">:</span> <span class="token number">57</span><span class="token punctuation">,</span>
  <span class="token property">"location"</span><span class="token operator">:</span> <span class="token string">"local"</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case.gcode"</span>
<span class="token punctuation">}</span></code></pre>
<p>Z-Axis change: <code>octoprint/event/ZChange</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"new"</span><span class="token operator">:</span> <span class="token number">9.0</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"ZChange"</span><span class="token punctuation">,</span>
  <span class="token property">"old"</span><span class="token operator">:</span> <span class="token number">8.8</span>
<span class="token punctuation">}</span></code></pre>
<p>Print job complete <code>octoprint/event/PrintDone</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"origin"</span><span class="token operator">:</span> <span class="token string">"local"</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"PrintDone"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"file"</span><span class="token operator">:</span> <span class="token string">"/.../NodeMCU_Case.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"time"</span><span class="token operator">:</span> <span class="token number">5252.172917127609</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"filename"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">2823042</span>
<span class="token punctuation">}</span></code></pre>
<p>Printer state changes: <code>octoprint/event/PrinterStateChanged</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"state_string"</span><span class="token operator">:</span> <span class="token string">"Operational"</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"PrinterStateChanged"</span><span class="token punctuation">,</span>
  <span class="token property">"state_id"</span><span class="token operator">:</span> <span class="token string">"OPERATIONAL"</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span>
  <span class="token property">"state_string"</span><span class="token operator">:</span> <span class="token string">"Printing"</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"PrinterStateChanged"</span><span class="token punctuation">,</span>
  <span class="token property">"state_id"</span><span class="token operator">:</span> <span class="token string">"PRINTING"</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="time-lapse">Time Lapse</h2>
<p>Image capture start: <code>octoprint/event/CaptureStart</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"CaptureStart"</span><span class="token punctuation">,</span>
  <span class="token property">"file"</span><span class="token operator">:</span> <span class="token string">"/.../NodeMCU_Case_20170829185831-767.jpg"</span>
<span class="token punctuation">}</span></code></pre>
<p>Image capture complete: <code>octoprint/event/CaptureDone</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"CaptureDone"</span><span class="token punctuation">,</span>
  <span class="token property">"file"</span><span class="token operator">:</span> <span class="token string">"/.../NodeMCU_Case_20170829185831-767.jpg"</span>
<span class="token punctuation">}</span></code></pre>
<p>Time lapse render start: <code>octoprint/event/MovieRendering</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"movie"</span><span class="token operator">:</span> <span class="token string">"/.../NodeMCU_Case_20170829185831.mpg"</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"MovieRendering"</span><span class="token punctuation">,</span>
  <span class="token property">"movie_prefix"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_20170829185831"</span><span class="token punctuation">,</span>
  <span class="token property">"gcode"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"movie_basename"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_20170829185831.mpg"</span>
<span class="token punctuation">}</span></code></pre>
<p>Time lapse render completed: <code>octoprint/event/MovieDone</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"movie"</span><span class="token operator">:</span> <span class="token string">"/.../NodeMCU_Case_20170829185831.mpg"</span><span class="token punctuation">,</span>
  <span class="token property">"_event"</span><span class="token operator">:</span> <span class="token string">"MovieDone"</span><span class="token punctuation">,</span>
  <span class="token property">"movie_prefix"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_20170829185831"</span><span class="token punctuation">,</span>
  <span class="token property">"gcode"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case.gcode"</span><span class="token punctuation">,</span>
  <span class="token property">"movie_basename"</span><span class="token operator">:</span> <span class="token string">"NodeMCU_Case_20170829185831.mpg"</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="temperatures">Temperatures</h2>
<p>Hot End temperature: <code>octoprint/temperature/tool0</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"actual"</span><span class="token operator">:</span> <span class="token number">211.88</span><span class="token punctuation">,</span>
  <span class="token property">"target"</span><span class="token operator">:</span> <span class="token number">210.0</span>
<span class="token punctuation">}</span></code></pre>
<p>Bed temperature: <code>octoprint/temperature/bed</code></p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"actual"</span><span class="token operator">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>
  <span class="token property">"target"</span><span class="token operator">:</span> <span class="token number">50.0</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="parsing-data-in-node-red">Parsing data in Node-RED</h2>
<p>Lastly we will look into accessing this information using <a href="https://nodered.org/">Node-RED</a> and publishing it to a <a href="https://github.com/node-red/node-red-dashboard">node-red-dashboard</a> powered graph. Our flow will looks like this:</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-08-30/post/QMbceI2Uul-601.avif 601w"><source type="image/webp" srcset="/blog/2017/2017-08-30/post/QMbceI2Uul-601.webp 601w"><img loading="lazy" decoding="async" src="/blog/2017/2017-08-30/post/QMbceI2Uul-601.png" alt="" width="601" height="171"></picture>
<p>First we will need to subscribe to the relevant events on your MQTT broker (mine is hosted locally hence the IP Address), in the below case we are subscribing to the <code>octoprint/temperature/tool0</code> event (a.k.a. the hot-end).</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-08-30/post/jOKbRZV5v4-497.avif 497w"><source type="image/webp" srcset="/blog/2017/2017-08-30/post/jOKbRZV5v4-497.webp 497w"><img loading="lazy" decoding="async" src="/blog/2017/2017-08-30/post/jOKbRZV5v4-497.png" alt="" width="497" height="241"></picture>
<p>I then make use of a script block with the below code to <code>JSON.parse()</code>, extract and publish the collected information out as the <code>msg.payload</code>.</p>
<pre class="language-js" tabindex="0"><code class="language-js"><span class="token keyword">var</span> parsed <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>parsed<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"actual"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">.</span>payload <span class="token operator">=</span> parsed<span class="token punctuation">.</span>actual<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">.</span>payload <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> msg<span class="token punctuation">;</span></code></pre>
<picture><source type="image/avif" srcset="/blog/2017/2017-08-30/post/TckczqPBwn-504.avif 504w"><source type="image/webp" srcset="/blog/2017/2017-08-30/post/TckczqPBwn-504.webp 504w"><img loading="lazy" decoding="async" src="/blog/2017/2017-08-30/post/TckczqPBwn-504.png" alt="" width="504" height="295"></picture>
<p>This feeds into a graph node (along with the bed temperature) and can be viewed on my dashboard as shown below:</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-08-30/post/o-PkL-JQos-650.avif 650w"><source type="image/webp" srcset="/blog/2017/2017-08-30/post/o-PkL-JQos-650.webp 650w"><img loading="lazy" decoding="async" src="/blog/2017/2017-08-30/post/o-PkL-JQos-650.png" alt="" width="650" height="427"></picture>
<p>Knowing the events published by your print server allows for some rather interesting work flows (I'll cover this in another post), shown below is my automated printer shutdown flow that powers down my printer using an IoT enabled power switch 4 minutes after a print job has completed.</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-08-30/post/JtGvww-b61-908.avif 908w"><source type="image/webp" srcset="/blog/2017/2017-08-30/post/JtGvww-b61-908.webp 908w"><img loading="lazy" decoding="async" src="/blog/2017/2017-08-30/post/JtGvww-b61-908.png" alt="" width="908" height="316"></picture>

<div class="d-flex mb-3 prev-next">
	<i class="bi bi-arrow-left-short"></i>
	<span class="text-start">Previous<br><a href="/blog/2017/2017-08-29/post/">MQTT Dumper (Alpha)</a></span>
	
	<div class="p-2 flex-grow-1">&nbsp;</div>
	<span class="text-end">Next<br><a href="/blog/2017/2017-08-31/post/">Anet A8 - My first 3D printer</a></span>
	<i class="bi bi-arrow-right-short"></i>
	
</div>




			</div>
		</main>
		<footer class="footer mt-auto py-3 bg-body-tertiary">
			<div class="container text-end">
				<span class="text-body-secondary">
					View me on <a href="https://github.com/rniemand" target="_blank">GitHub</a>.
				</span>
			</div>
		</footer>
		<!-- This page `/blog/2017/2017-08-30/post/` was built on 2025-07-15T16:09:44.095Z -->
		<script type="module" src="/dist/FtW8cD1Sur.js"></script>
		<script src="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
		<script id="dsq-count-scr" src="//richardn-ca.disqus.com/count.js" async=""></script>
	</body>
</html>
