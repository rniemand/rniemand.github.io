<!doctype html>
<html lang="en" class="h-100" data-bs-theme="dark">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Monitoring Host System with Home Assistant</title>
		<meta name="description" content="Coding and more">
		
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
		<meta name="generator" content="Eleventy v3.1.1">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap');

body {
	/* font-size: 1rem; */
	font-family: "Open Sans", sans-serif;
	font-optical-sizing: auto;
}

div.main-content {
	margin-top: 4rem;
	font-size: 1.2rem;
}

.blog-list a {
	text-decoration: none;
}

.post-meta .post-date time {
	color: #52a0d7;
}
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}</style>
		
		<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1689302880129363" crossorigin="anonymous"></script>
	</head>
	<!-- Google tag (gtag.js) -->
	<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HRDC8SXRVG"></script>
	
	<body class="d-flex flex-column h-100">
		<header>
			<nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background-color:rgb(53, 76, 92);">
				<div class="container-fluid">
					<a class="navbar-brand" href="/">RichardN</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarCollapse">
						<ul class="navbar-nav me-auto mb-2 mb-md-0">
							<li class="nav-item">
								<a class="nav-link " href="/">Home</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/blog/">Archive</a>
							</li>
							<li class="nav-item">
								<a class="nav-link " href="/about/">About</a>
							</li>
						</ul>
					</div>
				</div>
        	</nav>
		</header>
		<main class="flex-shrink-0">
			<div class="container main-content">
				


<h1 id="monitoring-host-system-with-home-assistant">Monitoring Host System with Home Assistant</h1>

<div class="p-1 mb-1 d-flex post-meta">
		<span>
			<i class="bi bi-bookmarks-fill"></i>
				<a href="/tags/home-assistant/" class="post-tag">home assistant</a>
		</span>
	<div class="p-2 flex-grow-1">&nbsp;</div>
	<span class="post-date">
		<i class="bi bi-calendar-plus-fill"></i>
		<time datetime="2017-09-15">15 September 2017</time>
	</span>
</div>

<p>Today I am going to be covering the <a href="https://www.home-assistant.io/integrations/systemmonitor/">system monitor sensor</a> for Home Assistant, specifically how to use it to monitor the underlying host computer (or system). This component exposes CPU, disk, memory and network values to Home Assistant for monitoring and alerting.</p>
<h2 id="enabling-monitoring">Enabling monitoring</h2>
<p>First we will need to enable the sensor in our <code>config/sensor.yaml</code> file. In order to monitor your network interface on a windows computer you will need to know the display name for your network adapter, you can get this value by running ipconfig in a command window, looking for the interface you want to monitor. The name of the interface will appear to the right of the Ethernet adapter (or wireless adapter) - in my case this is Ethernet.</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/4wutxhTPWT-505.avif 505w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/4wutxhTPWT-505.webp 505w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/4wutxhTPWT-505.png" alt="" width="505" height="203"></picture>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> systemmonitor
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> memory_use_percent
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> processor_use
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> last_boot
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> network_in
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">'Ethernet'</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> network_out
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">'Ethernet'</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> packets_in
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">'Ethernet'</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> packets_out
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">'Ethernet'</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> disk_use_percent
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">"M:\\"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> disk_use_percent
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">"N:\\"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> disk_use_percent
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">"O:\\"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> disk_use_percent
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">"P:\\"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> disk_use_percent
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">"C:\\"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> disk_use_percent
      <span class="token key atrule">arg</span><span class="token punctuation">:</span> <span class="token string">"I:\\"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> memory_free</code></pre>
<p>As you can see from above, I am going to be monitoring a lot of resources, after restarting Home Assistant all my new resources appear at the top of the Home view.</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/iBQypKbhLN-694.avif 694w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/iBQypKbhLN-694.webp 694w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/iBQypKbhLN-694.png" alt="" width="694" height="223"></picture>
<h2 id="grouping-entities">Grouping entities</h2>
<p>I much prefer the cards display (called groups) over the default icons as it allows me to control the grouping and ordering of these objects. In order to create a group we will need to know the entity_id's for the targeted objects, we can get these from the state view https://:8123/dev-state my new objects are:</p>
<ul>
<li>sensor.cpu_use</li>
<li>sensor.diskusec</li>
<li>sensor.diskusei</li>
<li>sensor.diskusem</li>
<li>sensor.diskusen</li>
<li>sensor.diskuseo</li>
<li>sensor.diskusep</li>
<li>sensor.last_boot</li>
<li>sensor.packetsreceivedethernet</li>
<li>sensor.packetssentethernet</li>
<li>sensor.ram_use</li>
<li>sensor.received_ethernet</li>
<li>sensor.sent_ethernet</li>
<li>sensor.ram_free</li>
</ul>
<p>Let's start off by grouping all my hard drives together, to do this I will need to create a new group and add all the entities we want to include. In my config/groups.yaml file I added the following group:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">host_drives_group</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> NAS Disks
  <span class="token key atrule">entities</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> sensor.disk_use_c
    <span class="token punctuation">-</span> sensor.disk_use_i
    <span class="token punctuation">-</span> sensor.disk_use_m
    <span class="token punctuation">-</span> sensor.disk_use_n
    <span class="token punctuation">-</span> sensor.disk_use_o
    <span class="token punctuation">-</span> sensor.disk_use_p</code></pre>
<p>After restarting Home Assistant my new group exists:</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/9xhNXGE9NS-499.avif 499w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/9xhNXGE9NS-499.webp 499w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/9xhNXGE9NS-499.png" alt="" width="499" height="382"></picture>
<p>I used the same flow to create my Nas Network group:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">host_network_overview</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> NAS Network
  <span class="token key atrule">entities</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> sensor.sent_ethernet
    <span class="token punctuation">-</span> sensor.received_ethernet
    <span class="token punctuation">-</span> sensor.packets_sent_ethernet
    <span class="token punctuation">-</span> sensor.packets_received_ethernet</code></pre>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/Sx75gCmMK4-498.avif 498w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/Sx75gCmMK4-498.webp 498w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/Sx75gCmMK4-498.png" alt="" width="498" height="286"></picture>
<p>And finally one more last time to create my NAS Performance group:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">host_performance_group</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> NAS Performance
  <span class="token key atrule">entities</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> sensor.cpu_use
    <span class="token punctuation">-</span> sensor.ram_use
    <span class="token punctuation">-</span> sensor.ram_free
    <span class="token punctuation">-</span> sensor.last_boot</code></pre>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/d8A0UcAtD4-499.avif 499w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/d8A0UcAtD4-499.webp 499w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/d8A0UcAtD4-499.png" alt="" width="499" height="288"></picture>
<h2 id="creating-views">Creating views</h2>
<p>Lastly I would like to create a view (basically a tab on the top of the Home Assistant's UI) to display everything performance monitoring related. Views are a nice way to group together similar components and provide an uncluttered view into your home automation when compared to the default home view. View are basically groups with the view: yes attribute set, and are declared using the same syntax, i.e. we will need to know what we would like to display, in my case that was:</p>
<ul>
<li>group.hostdrivesgroup</li>
<li>group.hostnetworkoverview</li>
<li>group.hostperformancegroup</li>
</ul>
<p>You can use any <a href="https://materialdesignicons.com/">material design icon</a> to replace the default icons used by Home Assistant (provided you prefix them with mdi:), so for my view I am going to be using the desktop-classic icon:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">host_overview_view</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> NAS Overview
  <span class="token key atrule">view</span><span class="token punctuation">:</span> yes
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>desktop<span class="token punctuation">-</span>classic
  <span class="token key atrule">entities</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> group.host_network_overview
    <span class="token punctuation">-</span> group.host_drives_group
    <span class="token punctuation">-</span> group.host_performance_group</code></pre>
<p>Restart Home Assistance and my new view appears!</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/h2hLxEooxb-668.avif 668w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/h2hLxEooxb-668.webp 668w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/h2hLxEooxb-668.png" alt="" width="668" height="253"></picture>
<h2 id="customising-icons">Customising icons</h2>
<p>Just like with the views, any displayed entity on Home Assistants user interface can be customized, and have its default icon replaced with a new one. Unlike views and groups though, you need to make these customizations under the homeassistant root configuration property using the customize: attribute. To keep things simple I prefer to break these customizations out into their own file (config/customize.yaml) and reference them in as shown below:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">homeassistant</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">customize</span><span class="token punctuation">:</span> <span class="token tag">!include</span> config/customize.yaml</code></pre>
<p>For now I would like to change the icons for the NAS Network card:</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/k6CarP8JQc-498.avif 498w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/k6CarP8JQc-498.webp 498w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/k6CarP8JQc-498.png" alt="" width="498" height="286"></picture>
<p>In config/customize.yaml I added the following:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">sensor.packets_sent_ethernet</span><span class="token punctuation">:</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>upload<span class="token punctuation">-</span>network
<span class="token key atrule">sensor.packets_received_ethernet</span><span class="token punctuation">:</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>download<span class="token punctuation">-</span>network
<span class="token key atrule">sensor.received_ethernet</span><span class="token punctuation">:</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>arrow<span class="token punctuation">-</span>down<span class="token punctuation">-</span>bold<span class="token punctuation">-</span>circle<span class="token punctuation">-</span>outline
<span class="token key atrule">sensor.sent_ethernet</span><span class="token punctuation">:</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>arrow<span class="token punctuation">-</span>up<span class="token punctuation">-</span>bold<span class="token punctuation">-</span>circle<span class="token punctuation">-</span>outline</code></pre>
<p>After restarting Home Assistant my changes were visible. Note you can customize a lot more than just the icon of an entity (<a href="https://www.home-assistant.io/docs/configuration/customizing-devices/">full documentation here</a>), and as a result can produce some pretty interesting ways of displaying your data.</p>
<picture><source type="image/avif" srcset="/blog/2017/2017-09-15/post/JJuSXTEY3u-496.avif 496w"><source type="image/webp" srcset="/blog/2017/2017-09-15/post/JJuSXTEY3u-496.webp 496w"><img loading="lazy" decoding="async" src="/blog/2017/2017-09-15/post/JJuSXTEY3u-496.png" alt="" width="496" height="286"></picture>
<p>That's all for now, hopefully you found this post interesting and I look forward to any comments / suggestions below.</p>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/2017/2017-09-14/post2/">Wondrous OctoPrint &amp; My OrangePi Lite</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/2017/2017-09-18/post/">Monitoring Phone Battery with OwnTracks &amp; Home Assistant</a></li>
</ul>

			</div>
		</main>
		<footer class="footer mt-auto py-3 bg-body-tertiary">
			<div class="container text-end">
				<span class="text-body-secondary">
					<a href="https://github.com/rniemand" target="_blank">GitHub</a>
				</span>
			</div>
		</footer>
		<!-- This page `/blog/2017/2017-09-15/post/` was built on 2025-07-04T20:15:31.707Z -->
		<script type="module" src="/dist/WlufSHogYa.js"></script>
		<script src="//cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
